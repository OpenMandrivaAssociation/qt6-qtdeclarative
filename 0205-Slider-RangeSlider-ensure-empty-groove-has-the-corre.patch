From 1ff570decedda1055948b1db47a7e9aaa6b0939a Mon Sep 17 00:00:00 2001
From: Richard Moe Gustavsen <richard.gustavsen@qt.io>
Date: Fri, 24 Oct 2025 13:21:27 +0200
Subject: [PATCH 205/239] Slider/RangeSlider: ensure empty groove has the
 correct look
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

With Liquid Glass enabled, the groove of the Slider and
RangeSlider had a border which made the groove look taller
than the track/progress (which had no border). But looking
more carefully at the native NSSlider in Xcode, it shows
that the Slider groove (and track) should no longer have
any border at all (which is different from how it looks
in macOS 15).

This patch will therefore draw the track without a border when
running with Liquid Glass. Using nested rectangles in order to
draw the slider in the macOS 15 style was also unnecessary, as
we can achive the same look by using a single Rectangle.

Pick-to: 6.9 6.8 6.5
Change-Id: I9d03a212f39857a448d103372636e9a12a7cbd3f
Reviewed-by: Tor Arne Vestb√∏ <tor.arne.vestbo@qt.io>
(cherry picked from commit 41a167c5fff6b8a7f9b7fc6d7899e8ff2e570fa5)
Reviewed-by: Qt Cherry-pick Bot <cherrypick_bot@qt-project.org>
---
 src/quickcontrols/macos/RangeSlider.qml | 26 +++++++++----------------
 src/quickcontrols/macos/Slider.qml      | 24 ++++++++---------------
 2 files changed, 17 insertions(+), 33 deletions(-)

diff --git a/src/quickcontrols/macos/RangeSlider.qml b/src/quickcontrols/macos/RangeSlider.qml
index 06b7bbbafe..4c9327c1bd 100644
--- a/src/quickcontrols/macos/RangeSlider.qml
+++ b/src/quickcontrols/macos/RangeSlider.qml
@@ -62,7 +62,7 @@ T.RangeSlider {
         implicitHeight: control.horizontal ? 24 : 124
 
         readonly property bool __ignoreNotCustomizable: true
-        readonly property int barThickness: 4
+        readonly property int barThickness: NativeStyle.StyleConstants.runningWithLiquidGlass ? 6 : 4
 
         // Groove background.
         Rectangle {
@@ -78,22 +78,14 @@ T.RangeSlider {
                 height: parent.height
                 radius: parent.radius
                 // No border in dark mode, instead we fill.
-                color: Application.styleHints.colorScheme === Qt.Light
-                    ? "transparent" : Qt.lighter(control.palette.window, 1.6)
-                border.color: Application.styleHints.colorScheme === Qt.Light
-                    ? Qt.darker(control.palette.window, 1.1)
-                    : "transparent"
-
-                Rectangle {
-                    x: 1
-                    y: 1
-                    width: parent.width - 2
-                    height: parent.height - 2
-                    radius: parent.radius
-                    color: "transparent"
-                    border.color: Qt.darker(control.palette.window, 1.05)
-                    visible: Application.styleHints.colorScheme === Qt.Light
-                }
+                color: NativeStyle.StyleConstants.runningWithLiquidGlass
+                    ? NativeStyle.StyleConstants.tertiarySystemFillColor
+                    : Application.styleHints.colorScheme === Qt.Light
+                      ? "transparent" : Qt.lighter(control.palette.window, 1.6)
+                border.color: NativeStyle.StyleConstants.runningWithLiquidGlass
+                              ? NativeStyle.StyleConstants.tertiarySystemFillColor
+                              : Application.styleHints.colorScheme === Qt.Light
+                                ? Qt.darker(control.palette.window, 1.1) : "transparent"
             }
         }
 
diff --git a/src/quickcontrols/macos/Slider.qml b/src/quickcontrols/macos/Slider.qml
index 40326f107e..92fe25fbfb 100644
--- a/src/quickcontrols/macos/Slider.qml
+++ b/src/quickcontrols/macos/Slider.qml
@@ -61,22 +61,14 @@ T.Slider {
                 height: parent.height
                 radius: parent.radius
                 // No border in dark mode, instead we fill.
-                color: Application.styleHints.colorScheme === Qt.Light
-                    ? "transparent" : Qt.lighter(control.palette.window, 1.4)
-                border.color: Application.styleHints.colorScheme === Qt.Light
-                    ? Qt.darker(control.palette.window, 1.06)
-                    : "transparent"
-
-                Rectangle {
-                    x: 1
-                    y: 1
-                    width: parent.width - 2
-                    height: parent.height - 2
-                    radius: parent.radius
-                    color: "transparent"
-                    border.color: Qt.darker(control.palette.window, 1.05)
-                    visible: Application.styleHints.colorScheme === Qt.Light
-                }
+                color: NativeStyle.StyleConstants.runningWithLiquidGlass
+                    ? NativeStyle.StyleConstants.tertiarySystemFillColor
+                    : Application.styleHints.colorScheme === Qt.Light
+                      ? "transparent" : Qt.lighter(control.palette.window, 1.6)
+                border.color: NativeStyle.StyleConstants.runningWithLiquidGlass
+                              ? NativeStyle.StyleConstants.tertiarySystemFillColor
+                              : Application.styleHints.colorScheme === Qt.Light
+                                ? Qt.darker(control.palette.window, 1.1) : "transparent"
             }
         }
 
-- 
2.51.2

