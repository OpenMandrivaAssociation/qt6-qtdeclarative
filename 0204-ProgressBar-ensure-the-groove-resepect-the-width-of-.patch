From 6b084bd99981b9f3c0a18334dadace7f359cf16e Mon Sep 17 00:00:00 2001
From: Richard Moe Gustavsen <richard.gustavsen@qt.io>
Date: Fri, 24 Oct 2025 13:06:24 +0200
Subject: [PATCH 204/239] ProgressBar: ensure the groove resepect the width of
 the control
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

As it stood, the progress bar groove would not be resized
according to the size of the control, since it lacked at
width binding.

This patch will make sure to resize the groove correctly. It
also fixes a binding loop warning related to the use of Loaders
in combination with childrenRect in the same go.

Fixes: QTBUG-141182
Pick-to: 6.9 6.8 6.5
Change-Id: I1aa87db339b04686ca521b486e4c7a05683a7679
Reviewed-by: Tor Arne Vestb√∏ <tor.arne.vestbo@qt.io>
(cherry picked from commit 603d7f0061c38e6f43939611fe2a471c10a2382c)
Reviewed-by: Qt Cherry-pick Bot <cherrypick_bot@qt-project.org>
---
 src/quickcontrols/macos/ProgressBar.qml | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/quickcontrols/macos/ProgressBar.qml b/src/quickcontrols/macos/ProgressBar.qml
index 8c808d2b7a..7b238b4fd4 100644
--- a/src/quickcontrols/macos/ProgressBar.qml
+++ b/src/quickcontrols/macos/ProgressBar.qml
@@ -19,13 +19,13 @@ T.ProgressBar {
 
     background: Item {
         implicitWidth: 100
-        implicitHeight: childrenRect.height
+        implicitHeight: NativeStyle.StyleConstants.runningWithLiquidGlass ? 8 : 12
         readonly property bool __ignoreNotCustomizable: true
 
         Loader {
             active: NativeStyle.StyleConstants.runningWithLiquidGlass
             width: parent.width
-            height: 8
+            height: root.background.implicitHeight
             sourceComponent: Rectangle {
                 y: (parent.height - height) / 2
                 radius: height / 2
@@ -37,6 +37,8 @@ T.ProgressBar {
 
         Loader {
             active: !NativeStyle.StyleConstants.runningWithLiquidGlass
+            width: parent.width
+            height: root.background.implicitHeight
             sourceComponent: NativeStyle.ProgressBar {
                 control: root
                 useNinePatchImage: false
-- 
2.51.2

